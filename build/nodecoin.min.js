!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.w={},r(r.s=166)}([function(e,t,r){var n=r(53),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){var n=r(151),o=r(146);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(26),a=(n=o)&&n.__esModule?n:{default:n};a.default.Promise=r(58);var u={hash:{type:String,required:!0},version:{type:Number,default:1,required:!0},previousHash:{type:String,required:!0},merkleHash:{type:String,required:!0},timestamp:{type:Number,required:!0,default:(new Date).getTime()},difficulty:{type:Number,required:!0,default:22},nonce:{type:Number,required:!0},txs:{type:Array,default:[]},blocksize:{type:Number,required:!0}},i=new a.default.Schema(u),c=a.default.model("blocks",i);t.default=c},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var n=r(14),o=r(150),a=r(149),u="[object Null]",i="[object Undefined]",c=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?i:u:c&&c in Object(e)?o(e):a(e)}},function(e,t){e.exports=require("js-sha256")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(72),u=r(36),i=(n=u)&&n.__esModule?n:{default:n};function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var s={dbLoaded:!1,lastBlock:null,numBlocks:0,allPeers:[],version:1,difficulty:0,memoryPool:[],pendingBlockTxs:[],unfetchedHeaders:new Set,loadingHeaders:new Set,orphanTransactions:new Set,isMining:!1},f=void 0,l=void 0,p=void 0,d=void 0,v=(0,a.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case"SET_INITIAL_BLOCKS":return o({},e,{dbLoaded:!0,lastBlock:t.blocks[t.blocks.length-1],numBlocks:t.blocks.length});case"ADD_BLOCK":return o({},e,{lastBlock:t.block,numBlocks:e.numBlocks+1});case"SET_DIFFICULTY":return o({},e,{difficulty:t.difficulty});case"SET_PEERS":return o({},e,{allPeers:t.allPeers});case"CONNECT_PEER":return p=(0,i.default)(e.allPeers,function(e){return e.ip===t.ip}),o({},e,{allPeers:-1===p?e.allPeers:[].concat(c(e.allPeers.slice(0,p)),[{ip:t.ip,client:t.client,synced:!1,connected:!0}],c(e.allPeers.slice(p+1)))});case"ADD_UNFETCHED_HEADERS":return o({},e,{unfetchedHeaders:new Set([].concat(c(Array.from(e.unfetchedHeaders)),c(t.headers)))});case"LOADING_BLOCK":return(f=e.unfetchedHeaders).delete(t.header),(l=e.loadingHeaders).add(t.header),o({},e,{unfetchedHeaders:f,loadingHeaders:l});case"NEW_BLOCK":return(f=e.unfetchedHeaders).delete(t.header),(l=e.loadingHeaders).delete(t.header),o({},e,{lastBlock:t.block,numBlocks:e.numBlocks+1,unfetchedHeaders:f,loadingHeaders:l});case"SYNC_PEER":return p=(0,i.default)(e.allPeers,function(e){return e.ip===t.ip}),o({},e,{allPeers:-1===p?e.allPeers:[].concat(c(e.allPeers.slice(0,p)),[o({},e.allPeers[p],{synced:!0,connected:!0})],c(e.allPeers.slice(p+1)))});case"NEW_TX":return o({},e,{memoryPool:[].concat(c(e.memoryPool),[t.tx])});case"START_MINING":return o({},e,{isMining:!0});case"STOP_MINING":return d=e.memoryPool,o({},e,{isMining:!1,memoryPool:[],pendingBlockTxs:d});default:return e}});v.dispatch=function(e){var t=e.dispatch;return function(e){console.log("> Action: "+e.type+", (Keys:  "+Object.keys(e).join(", ")+")");var r=t(e);return r}}(v),t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.Hash=f,t.unlockTransaction=function(e,t){try{var r=f(e),n=s.keyFromPrivate(t),o=s.sign(r,n);return o.toDER("hex")}catch(e){return null}},t.verifyUnlock=l,t.testVerification=function(e){console.log("> Testing digital signature....");var t=e.txid,r=e.prevout,o=e.scriptSig.split(" "),a=n(o,2),u=a[0],i=a[1];return console.log("> Public key: ",u),console.log("> Signature: ",i),l(t,r.scriptPubKey,u,i)};c(r(85));var o=r(34),a=r(18),u=c(r(33)),i=c(r(6));function c(e){return e&&e.__esModule?e:{default:e}}var s=new o.ec("secp256k1");function f(e){return(new u.default).update((0,i.default)(e)).digest("hex")}function l(e,t,r,n){try{if(!((0,a.getAddress)(r)===t))return!1;var o=f(e);return s.keyFromPublic(r,"hex").verify(o,n)}catch(e){return!1}}},function(e,t,r){var n=r(10),o=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},function(e,t,r){var n=r(5),o=r(4),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==a}},function(e,t,r){var n=r(137);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){var n=r(2)(Object,"create");e.exports=n},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var n=r(0).Symbol;e.exports=n},function(e,t,r){var n=r(55);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},function(e,t,r){var n=r(161),o=r(160),a=r(159),u=r(158),i=r(157);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=u,c.prototype.set=i,e.exports=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startMining=void 0;var n,o,a=t.startMining=(n=regeneratorRuntime.mark(function e(){var t,r,n,o,d,h,b,y,x,g,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("> Starting to mine new block..."),!l.default.getState().isMining){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,(0,c.isNodeSynced)();case 6:if(e.sent){e.next=10;break}return l.default.dispatch({type:"STOP_MINING"}),e.abrupt("return",!1);case 10:if(t=l.default.getState().memoryPool,!((r=t.length)<v)){e.next=17;break}return console.log("> Waiting for txs to mine... checking in 20 seconds"),l.default.dispatch({type:"STOP_MINING"}),setTimeout(a,2e4),e.abrupt("return",!1);case 17:for(console.log("> Validating txs for block....".yellow),n=[],o=0;o<r;o++)d=t[o],(0,s.isTxValid)(d)&&n.push(d);return e.next=22,i.default.findOne({}).sort({timestamp:-1}).limit(1);case 22:return h=e.sent,b={version:1,previousHash:h.hash,merkleHash:(0,p.default)(),timestamp:(new Date).getTime(),difficulty:h.difficulty,nonce:0},y=new u.default(b,n),l.default.dispatch({type:"START_MINING"}),y.findCorrectNonce(),l.default.dispatch({type:"STOP_MINING"}),x="https://pusher-presence-auth.herokuapp.com/blocks/new",g={block:y.getDBFormat()},e.next=32,f.default.post(x,g);case 32:return m=e.sent,console.log("> Send block response: ",m.data),e.abrupt("return",!0);case 35:case"end":return e.stop()}},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)}),u=d(r(27)),i=d(r(3)),c=(d(r(6)),r(31)),s=r(28),f=d(r(32)),l=d(r(7)),p=d(r(29));function d(e){return e&&e.__esModule?e:{default:e}}var v=1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=p,t.getAddress=function(e){var t=p(e);return o.default.encode(t,l.public)},t.makeWallet=function(){var e=i.default.randomBuffer(32);console.log("> Private key created: ",e.toString("hex"));var t=f.keyFromPrivate(e).getPublic("hex");console.log("> Public key created: ",t);var r=p(t);console.log("> Public key hash created: ",r.toString("hex"));var o=function(e){var t=Buffer.from("00"+e,"hex"),r=(0,c.default)(t),o=(0,c.default)(Buffer.from(r,"hex")).substring(0,8),a=t.toString("hex")+o;return n.default.encode(Buffer.from(a,"hex"))}(r.toString("hex"));console.log("> Public address created: ",o);var a=function(e){var t=Buffer.from("80"+e,"hex"),r=(0,c.default)(t),o=(0,c.default)(Buffer.from(r,"hex")).substring(0,8),a=t.toString("hex")+o;return n.default.encode(Buffer.from(a,"hex"))}(e.toString("hex"));return console.log("> Private key WIF (wallet import format) created : ",a),{privateKey:e.toString("hex"),publicKey:t,publicKeyHash:r.toString("hex"),privateKeyWIF:a,publicAddress:o}};var n=s(r(84)),o=s(r(83)),a=(s(r(82)),r(34)),u=s(r(33)),i=s(r(81)),c=s(r(6));function s(e){return e&&e.__esModule?e:{default:e}}var f=new a.ec("secp256k1"),l={public:0,private:128};function p(e){var t=(0,c.default)(Buffer.from(e,"hex"));return(new u.default).update(Buffer.from(t,"hex")).digest()}},function(e,t,r){var n=r(1),o=r(10),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||u.test(e)||!a.test(e)||null!=t&&e in Object(t)}},function(e,t){var r=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},function(e,t,r){var n=r(119),o=r(112),a=r(42);e.exports=function(e){return a(e)?n(e):o(e)}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},function(e,t,r){var n=r(145),o=r(138),a=r(136),u=r(135),i=r(134);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=u,c.prototype.set=i,e.exports=c},function(e,t,r){var n=r(2)(r(0),"Map");e.exports=n},function(e,t,r){var n=r(164)(r(36));e.exports=n},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),i=(n=u)&&n.__esModule?n:{default:n};var c=1e8,s="1Nd85AnFYDtaQAG6vF9FVWXFWksG5HuA3M",f={version:1,previousHash:"0000000000000000000000000000000000000000000000000000000000000000",merkleHash:"4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b",difficulty:22,nonce:2620954,timestamp:1231006505e3};var l=function(){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.header=o?f:t,this.hash=this.getBlockHash(this.header,this.header.nonce),r=o?[(n=s,{vin:[{prevout:"COINBASE",n:null}],vout:[{scriptPubKey:n,nValue:50*c}]})]:r,this.txs=[];for(var a=0;a<r.length;a++)this.addTransaction(r[a]);this.blocksize=this.getBlocksize()}return a(e,[{key:"getBlockHash",value:function(e,t){return(0,i.default)(""+e.version+e.previousHash+e.merkleHash+e.timestamp+e.difficulty+t)}},{key:"getDBFormat",value:function(){return{hash:this.hash,version:this.header.version,previousHash:this.header.previousHash,merkleHash:this.header.merkleHash,timestamp:this.header.timestamp,difficulty:this.header.difficulty,nonce:this.header.nonce,txs:this.txs,blocksize:this.blocksize}}},{key:"addTransaction",value:function(e){var t=(0,i.default)(this.hash+(0,i.default)(JSON.stringify(e)));return this.txs.push(o({},e,{hash:t})),this.txs}},{key:"setNonce",value:function(e){this.header.nonce=e,this.hash=this.getBlockHash(this.header,e)}},{key:"setHeader",value:function(e){return this.header=e,this.hash=this.getBlockHash(e,e.nonce),this.adjustTxids(),this.header}},{key:"getBlocksize",value:function(){return JSON.stringify(this).length}},{key:"adjustTxids",value:function(){for(var e=[],t=0;t<this.txs.length;t++){var r=this.txs[t],n=(0,i.default)(this.hash+(0,i.default)(JSON.stringify({vin:r.vin,vout:r.vout})));e.push(o({},r,{hash:n}))}this.txs=e}},{key:"findCorrectNonce",value:function(){var e=Math.pow(2,256-this.header.difficulty),t=this.header.nonce;for(console.log("> Solving for block nonce...");parseInt(this.getBlockHash(this.header,t),16)>e;)this.setNonce(++t);return this.adjustTxids(),this.header.nonce}}]),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTxValid=t.isBlockValid=t.areBlocksValid=void 0;var n,o,a,u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=(t.areBlocksValid=(n=v(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=1;case 1:if(!(r<t.length)){e.next=10;break}return e.next=4,c(t[r],t[r-1]);case 4:if(e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:r++,e.next=1;break;case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),t.isBlockValid=(o=v(regeneratorRuntime.mark(function e(t,r){var n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.txs,t.previousHash===r.hash){e.next=3;break}return e.abrupt("return",!1);case 3:o=0;case 4:if(!(o<n.length)){e.next=13;break}return e.next=7,s(n[o]);case 7:if(e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:o++,e.next=4;break;case 13:if(a=Math.pow(2,256-t.difficulty),!(parseInt(t.hash,16)>a)){e.next=16;break}return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})),s=t.isTxValid=(a=v(regeneratorRuntime.mark(function e(t){var r,n,o,a,c,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.vin&&t.vin.length&&t.vout&&t.vout.length){e.next=2;break}return e.abrupt("return",!1);case 2:!1,r=0,n=0,o=regeneratorRuntime.mark(function e(o){var a,i,c,d,v,b,y,x,g,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("COINBASE"!==(a=t.vin[o]).prevout){e.next=5;break}if(!(t.vout.length>1||t.vin.length>1||t.vout[o].nValue>h)){e.next=4;break}return e.abrupt("return",{v:!1});case 4:return e.abrupt("return",{v:!0});case 5:if(a.prevout&&a.scriptSig&&"number"==typeof a.n){e.next=7;break}return e.abrupt("return",{v:!1});case 7:return e.next=9,f.default.findOne({"txs.hash":a.prevout});case 9:if(i=e.sent){e.next=12;break}return e.abrupt("return",{v:!1});case 12:if(c=(0,l.default)(i.txs,function(e){return e.hash===a.prevout})){e.next=15;break}return e.abrupt("return",{v:!1});case 15:return r+=c.vout[a.n].nValue,e.next=18,f.default.find({"txs.vin.prevout":a.prevout});case 18:if(!(e.sent.length>1)){e.next=21;break}return e.abrupt("return",{v:!1});case 21:if(c.vout[a.n].scriptPubKey,d=c.hash,v=a.scriptSig.split(" "),b=u(v,2),y=b[0],x=b[1],(0,p.verifyUnlock)(d,c.vout[a.n].scriptPubKey,y,x)){e.next=27;break}return e.abrupt("return",{v:!1});case 27:g=0;case 28:if(!(g<t.vout.length)){e.next=36;break}if("number"==typeof(m=t.vout[g]).nValue&&"string"==typeof m.scriptPubKey){e.next=32;break}return e.abrupt("return",{v:!1});case 32:n+=m.nValue;case 33:g++,e.next=28;break;case 36:if(!(r-n<0)){e.next=39;break}return e.abrupt("return",{v:!1});case 39:return e.abrupt("return",{v:!0});case 40:case"end":return e.stop()}},e,s)}),a=0;case 7:if(!(a<t.vin.length)){e.next=15;break}return e.delegateYield(o(a),"t0",9);case 9:if("object"!==(void 0===(c=e.t0)?"undefined":i(c))){e.next=12;break}return e.abrupt("return",c.v);case 12:a++,e.next=7;break;case 15:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),f=(d(r(27)),d(r(3))),l=d(r(25)),p=r(8);function d(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,a){try{var u=t[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}var h=5e9},function(e,t){e.exports=require("uuid")},function(e,t,r){var n=r(71);e.exports=function(e){return e&&e.length?n(e):[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeSynced=void 0;t.isNodeSynced=(n=regeneratorRuntime.mark(function e(){var t,r,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.default.getState(),r=t.allPeers,t.isMining,n=r.filter(function(e){return!e.unreachable&&!e.wrongVersion}),o=(0,u.default)(n.map(function(e){return e.synced})),i=1===o.length&&o[0],e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)}),r(17);var n,o,a=i(r(7)),u=i(r(30));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(79);var a=((n=o)&&n.__esModule?n:{default:n}).default.create({validateStatus:function(e){return!0},responseType:"json",timeout:1e4});t.default=a},function(e,t){e.exports=require("ripemd160")},function(e,t){e.exports=require("elliptic")},function(e,t){e.exports=function(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},function(e,t,r){var n=r(35),o=r(57),a=r(88),u=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var c=null==r?0:a(r);return c<0&&(c=u(i+c,0)),n(e,o(t,3),c)}},function(e,t,r){var n=r(1),o=r(19),a=r(101),u=r(98);e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:a(u(e))}},function(e,t,r){var n=r(37),o=r(9);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[o(t[r++])];return r&&r==a?e:void 0}},function(e,t){e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},function(e,t,r){var n=r(13);e.exports=function(e){return e==e&&!n(e)}},function(e,t,r){var n=r(2)(r(0),"Set");e.exports=n},function(e,t,r){var n=r(54),o=r(20);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},function(e,t,r){var n=r(115),o=r(114),a=r(113),u=a&&a.isTypedArray,i=u?o(u):n;e.exports=i},function(e,t){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?r:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(e){var n=r(0),o=r(116),a="object"==typeof t&&t&&!t.nodeType&&t,u=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=u&&u.exports===a?n.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;e.exports=c}).call(this,r(45)(e))},function(e,t,r){var n=r(117),o=r(4),a=Object.prototype,u=a.hasOwnProperty,i=a.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return o(e)&&u.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,r){var n=r(23),o=r(132),a=r(131);function u(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}u.prototype.add=u.prototype.push=o,u.prototype.has=a,e.exports=u},function(e,t,r){var n=r(49),o=r(130),a=r(48),u=1,i=2;e.exports=function(e,t,r,c,s,f){var l=r&u,p=e.length,d=t.length;if(p!=d&&!(l&&d>p))return!1;var v=f.get(e);if(v&&f.get(t))return v==t;var h=-1,b=!0,y=r&i?new n:void 0;for(f.set(e,t),f.set(t,e);++h<p;){var x=e[h],g=t[h];if(c)var m=l?c(g,x,h,t,e,f):c(x,g,h,e,t,f);if(void 0!==m){if(m)continue;b=!1;break}if(y){if(!o(t,function(e,t){if(!a(y,t)&&(x===e||s(x,e,r,c,f)))return y.push(t)})){b=!1;break}}else if(x!==g&&!s(x,g,r,c,f)){b=!1;break}}return f.delete(e),f.delete(t),b}},function(e,t,r){var n=r(133),o=r(4);e.exports=function e(t,r,a,u,i){return t===r||(null==t||null==r||!o(t)&&!o(r)?t!=t&&r!=r:n(t,r,a,u,e,i))}},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){var r="object"==typeof global&&global&&global.Object===Object&&global;e.exports=r},function(e,t,r){var n=r(5),o=r(13),a="[object AsyncFunction]",u="[object Function]",i="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=n(e);return t==u||t==i||t==a||t==c}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var n=r(16),o=r(156),a=r(155),u=r(154),i=r(153),c=r(152);function s(e){var t=this.__data__=new n(e);this.size=t.size}s.prototype.clear=o,s.prototype.delete=a,s.prototype.get=u,s.prototype.has=i,s.prototype.set=c,e.exports=s},function(e,t,r){var n=r(163),o=r(103),a=r(92),u=r(1),i=r(91);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?u(e)?o(e[0],e[1]):n(e):i(e)}},function(e,t){e.exports=require("bluebird")},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seedBlocks=t.myWallet=t.COIN=t.difficulty=void 0;var n,o;t.seedBlocks=(n=regeneratorRuntime.mark(function e(){var t,r,n,o,s,v,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],console.log("> Seeding db with initial blocks..."),r=void 0,n=void 0,o=void 0,s=void 0,v=void 0,e.next=5,u.default.find({}).remove({});case 5:return(r=new a.default({},[],!0)).findCorrectNonce(),v=new u.default(r.getDBFormat()),e.next=10,v.save();case 10:if(t.push(v),console.log("> Genesis block saved: ",v.hash),!h){e.next=14;break}return e.abrupt("return",[v]);case 14:return n={version:1,previousHash:v.hash,merkleHash:(0,c.default)(),difficulty:f,nonce:0,timestamp:(new Date).getTime()},o={vin:[{prevout:"COINBASE",n:null}],vout:[{scriptPubKey:p.address,nValue:50*l}]},s={vin:[{prevout:v.txs[0].hash,n:0,scriptSig:p.publicKey+" "+(0,i.unlockTransaction)(v.txs[0].hash,p.privateKey)}],vout:[{scriptPubKey:d.address,nValue:5*l},{scriptPubKey:p.address,nValue:45*l}]},(r=new a.default(n,[o,s],!1)).findCorrectNonce(),v=new u.default(r.getDBFormat()),e.next=22,v.save();case 22:return t.push(v),console.log("> Block #2 saved: ",v.hash),n={version:1,previousHash:v.hash,merkleHash:(0,c.default)(),difficulty:f,nonce:0,timestamp:(new Date).getTime()},o={vin:[{prevout:"COINBASE",n:null}],vout:[{scriptPubKey:p.address,nValue:50*l}]},s={vin:[{prevout:v.txs[1].hash,n:0,scriptSig:d.publicKey+" "+(0,i.unlockTransaction)(v.txs[1].hash,d.privateKey)}],vout:[{scriptPubKey:p.address,nValue:2*l},{scriptPubKey:d.address,nValue:3*l}]},(r=new a.default(n,[o,s],!1)).findCorrectNonce(),v=new u.default(r.getDBFormat()),e.next=32,v.save();case 32:return t.push(v),console.log("> Block #3 saved: ",v.hash),e.abrupt("return",t);case 35:case"end":return e.stop()}},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)});r(59);var a=s(r(27)),u=s(r(3)),i=r(8),c=s(r(29));function s(e){return e&&e.__esModule?e:{default:e}}var f=t.difficulty=22,l=t.COIN=1e8,p=t.myWallet={privateKey:"0fcb37c77f68a69b76cd5b160ac9c85877b4e8a09d8bcde2c778715c27f9a347",publicKey:"044283eb5f9aa7421f646f266fbf5f7a72b7229a7b90a088d1fe45292844557b1d80ed9ac96d5b3ff8286e7794e05c28f70ae671c7fecd634dd278eb0373e6a3ba",publicKeyHash:"ed2f84f67943321bf73747936db3e7273ada7f6c",address:"1Nd85AnFYDtaQAG6vF9FVWXFWksG5HuA3M",privateKeyWIF:"5HwF1jU38V8YhpBy9PuNC4hTYkKrDccLE28qV7tLxZ7u3pKXCy4"},d={privateKey:"6128428978e30fc034c95b7b091b373b875bdd73a0acf83c09d37bff72361349",publicKey:"04804a9ed2855fcea0f5b6e23e587a6c6f7159f15c84b9c82474231cfdac04827fac72a36bd0b463fc61c4d66a954aa7d5f95bde970804f81c8d6f712390516fbb",publicKeyHash:"f3a7ee518818e7adc56ed12e9f483712fc4dd0d5",address:"1PDLNfJq5GAEn5StESZuBpaBe6B3134vmD",privateKeyWIF:"5JZ5LHz7Kr3FXeU7asLfffasonpmxUX3smTQb8LtsD21UQqiYqo"}},function(e,t){e.exports=require("network")},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o;t.wait=(n=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){setTimeout(function(){e()},1e3*t)}));case 1:case"end":return e.stop()}},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(e){return o.apply(this,arguments)})},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(41),o=r(64),a=r(22),u=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;e.exports=u},function(e,t){e.exports=function(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}},function(e,t){e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t,r){var n=r(35),o=r(68),a=r(67);e.exports=function(e,t,r){return t==t?a(e,t,r):n(e,o,r)}},function(e,t,r){var n=r(69);e.exports=function(e,t){return!(null==e||!e.length)&&n(e,t,0)>-1}},function(e,t,r){var n=r(49),o=r(70),a=r(66),u=r(48),i=r(65),c=r(22),s=200;e.exports=function(e,t,r){var f=-1,l=o,p=e.length,d=!0,v=[],h=v;if(r)d=!1,l=a;else if(p>=s){var b=t?null:i(e);if(b)return c(b);d=!1,l=u,h=new n}else h=t?[]:v;e:for(;++f<p;){var y=e[f],x=t?t(y):y;if(y=r||0!==y?y:0,d&&x==x){for(var g=h.length;g--;)if(h[g]===x)continue e;t&&h.push(x),v.push(y)}else l(h,x,r)||(h!==v&&h.push(x),v.push(y))}return v}},function(e,t){e.exports=require("redux")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleData=void 0;var n,o,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=(t.handleData=(n=regeneratorRuntime.mark(function e(t){var r,n,o,l,v,h,b,y,x,g,m,_,k,w,P,S,j,O,A,E,B,N,T,M;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.client,n=this.isServer,o=this.ip,console.log(t.split(d).join(" ")),l=void 0,v=void 0,h=void 0,void 0,b=void 0,y=void 0,x=void 0,g=void 0,m=void 0,_=void 0,void 0,k=void 0,w=t.split(d),R=w,P=Array.isArray(R)?R:Array.from(R),S=P[0],j=P.slice(1),e.t0=S,e.next="VERSION"===e.t0?8:"GETBLOCKS"===e.t0?32:"BLOCKHEADERS"===e.t0?42:"REQUESTBLOCK"===e.t0?64:"SENDBLOCK"===e.t0?70:90;break;case 8:if(O=a(j,2),v=O[0],h=O[1],s.default.getState().version.toString()===v){e.next=14;break}return e.abrupt("return");case 14:if(l=s.default.getState().lastBlock.hash,n&&r.write(["VERSION",1,l].join(d)),h!==l){e.next=21;break}return s.default.dispatch({type:"SYNC_PEER",ip:o}),e.next=20,(0,c.startMining)();case 20:return e.abrupt("return");case 21:return e.next=23,u.default.findOne({hash:h});case 23:if(b=e.sent){e.next=28;break}r.write(["GETBLOCKS",l].join(d)),e.next=31;break;case 28:return s.default.dispatch({type:"SYNC_PEER",ip:o}),e.next=31,(0,c.startMining)();case 31:return e.abrupt("break",90);case 32:return h=j[0],e.next=35,u.default.findOne({hash:h});case 35:if(!(b=e.sent)){e.next=41;break}return e.next=39,u.default.find({timestamp:{$gt:b.timestamp}}).sort({timestamp:1}).limit(50);case 39:y=e.sent,r.write(["BLOCKHEADERS"].concat(p(y.map(function(e){return e.hash}))).join(d));case 41:return e.abrupt("break",90);case 42:if((x=j).length){e.next=48;break}return s.default.dispatch({type:"SYNC_PEER",ip:o}),e.next=47,(0,c.startMining)();case 47:return e.abrupt("return");case 48:s.default.dispatch({type:"ADD_UNFETCHED_HEADERS",headers:x}),A=s.default.getState(),E=A.allPeers,B=A.unfetchedHeaders,x=Array.from(B),m=0;case 52:if(!x.length){e.next=63;break}if(!(N=E[m]).client){e.next=61;break}return T=x.shift(),N.client.write(["REQUESTBLOCK",T].join(d)),s.default.dispatch({type:"LOADING_BLOCK",header:T}),m=E.length%(m+1),e.next=61,(0,f.wait)(1);case 61:e.next=52;break;case 63:return e.abrupt("break",90);case 64:return M=j[0],e.next=67,u.default.findOne({hash:M});case 67:return(g=e.sent)&&(JSON.stringify(g),r.write(["SENDBLOCK",JSON.stringify(g)].join(d))),e.abrupt("break",90);case 70:return g=JSON.parse(j[0]),e.next=73,u.default.findOne({hash:g.hash});case 73:if(!e.sent){e.next=76;break}return e.abrupt("return");case 76:if(_=s.default.getState().lastBlock){e.next=79;break}return e.abrupt("break",90);case 79:return e.next=81,(0,i.isBlockValid)(g,_);case 81:if(!e.sent){e.next=89;break}return k=new u.default(g),e.next=86,k.save();case 86:s.default.dispatch({type:"NEW_BLOCK",block:k}),s.default.getState().unfetchedHeaders.size<=0&&(l=s.default.getState().lastBlock.hash,r.write(["GETBLOCKS",l].join(d)));case 89:return e.abrupt("break",90);case 90:case"end":return e.stop()}var R},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(e){return o.apply(this,arguments)}),l(r(3))),i=r(28),c=r(17),s=l(r(7)),f=r(63);function l(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var d="~~~~~~"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.connectToDB=void 0;t.connectToDB=(n=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){i.default.connect("mongodb://localhost:27017/nodecoin",function(t){if(t)throw new Error("Error connecting to mongo. "+t);console.log("> Successfully conected to MongoDB 🔐"),e(!0)})}));case 1:case"end":return e.stop()}},e,this)}),o=function(){var e=n.apply(this,arguments);return new Promise(function(t,r){return function n(o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});t(i)}("next")})},function(){return o.apply(this,arguments)});var n,o,a,u=r(26),i=(a=u)&&a.__esModule?a:{default:a}},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(26),a=(n=o)&&n.__esModule?n:{default:n};a.default.Promise=r(58);var u={hash:{type:String,required:!0,index:{unique:!0}},vin:{type:Array,required:!0},vout:{type:Array,required:!0}},i=new a.default.Schema(u),c=a.default.model("transactions",i);t.default=c},function(e,t){e.exports=require("pusher-js")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("axios")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendMoney=t.getWalletData=void 0;var n,o,a=t.getWalletData=(n=d(regeneratorRuntime.mark(function e(t){var r,n,o,a,i,s,f,l,p,d,h,b,y=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0,n={},e.next=4,u.default.find({}).sort({timestamp:1});case 4:o=e.sent,a=0;case 6:if(!(a<o.length)){e.next=25;break}i=o[a],s=0;case 9:if(!(s<i.txs.length)){e.next=22;break}for(f=i.txs[s],l=0;l<f.vout.length;l++)p=f.vout[l],p.scriptPubKey===t&&(r+=p.nValue/v,n[f.hash]={nValue:p.nValue,n:l});d=regeneratorRuntime.mark(function e(o){var a,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("COINBASE"===(a=f.vin[o]).prevout){e.next=6;break}return e.next=4,u.default.findOne({"txs.hash":a.prevout});case 4:(i=e.sent)&&(s=(0,c.default)(i.txs,function(e){return e.hash===a.prevout}),l=s.vout[a.n],l.scriptPubKey===t&&(r-=l.nValue/v,delete n[a.prevout]));case 6:case"end":return e.stop()}},e,y)}),h=0;case 14:if(!(h<f.vin.length)){e.next=19;break}return e.delegateYield(d(h),"t0",16);case 16:h++,e.next=14;break;case 19:s++,e.next=9;break;case 22:a++,e.next=6;break;case 25:return b=Object.keys(n).map(function(e){return{txid:e,n:n[e].n,nValue:n[e].nValue}}),e.abrupt("return",{utxo:b,balance:r});case 27:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),u=(t.sendMoney=(o=d(regeneratorRuntime.mark(function e(t,r){var n,o,u,c,p,d,h,b,y,x,g,m,_,k,w,P,S,j,O,A;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.body,o=n.amount,u=n.privateKey,c=n.publicKey,p=n.toAddress,o&&u&&c&&p){e.next=3;break}return e.abrupt("return",r.status(500).send({error:"Missing parameters [amount|privateKey|publicKey|toAddress]"}));case 3:return"string"==typeof o&&(o=parseInt(o)),o*=v,console.log("> Amount to send: ",o),d=(0,s.getAddress)(c),e.next=9,a(d);case 9:if(h=e.sent,b=h.utxo,y=h.balance,y*=v,console.log("> Current balance: ",y),b=b.sort(function(e,t){return e.nValue<t.nValue}),y>o){e.next=17;break}return e.abrupt("return",r.status(500).send({error:"Balance must be above amount to send."}));case 17:x=o,g=[],m=[],_=[],k=0;case 22:if(!(k<b.length)){e.next=38;break}if(w=b[k],w.nValue-x,P=Math.min(x,w.nValue),x-=P,_.push(w),g.push({prevout:w.txid,n:w.n,scriptSig:c+" "+(0,l.unlockTransaction)(w.txid,u)}),m.push({scriptPubKey:p,nValue:P}),!(w.nValue-P>0)){e.next=33;break}return m.push({scriptPubKey:(0,s.getAddress)(c),nValue:w.nValue-P}),e.abrupt("break",38);case 33:if(!(x<=0)){e.next=35;break}return e.abrupt("break",38);case 35:k++,e.next=22;break;case 38:return S={hash:(0,i.default)(JSON.stringify({vin:g,vout:m})),vin:g,vout:m},j="https://pusher-presence-auth.herokuapp.com/transactions/new",O={tx:S,timestamp:(new Date).getTime()},e.next=43,f.default.post(j,O);case 43:A=e.sent,console.log("> Send transaction response: ",A.data),r.status(200).send(A.data);case 46:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)}),p(r(3))),i=p(r(6)),c=p(r(25)),s=r(18),f=p(r(32)),l=r(8);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,a){try{var u=t[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}var v=1e8},function(e,t){e.exports=require("secure-random")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("coinstring")},function(e,t){e.exports=require("bs58")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="1Nd85AnFYDtaQAG6vF9FVWXFWksG5HuA3M",o=[{hash:"00000244a5bae572247ca9f5b9149fc3980fa90a7a70cd35030a29d81ebc88ea",version:1,previousHash:"0000000000000000000000000000000000000000000000000000000000000000",timestamp:1231006505e3,difficulty:22,nonce:2620954,blocksize:441,txs:[{hash:"892d3a0a01ab1a1c3d67e1592e5bd11df687e26098dda08478e6a58e0f6b337a",vin:[{prevout:"COINBASE"}],vout:[{value:5e9,scriptPubKey:n}]}]},{hash:"000001a20dacb2ede72eb4b35dea74b83fd4bc0b23849b789fee19c7eac2f1b9",version:1,previousHash:"00000244a5bae572247ca9f5b9149fc3980fa90a7a70cd35030a29d81ebc88ea",timestamp:1520947111852,difficulty:22,nonce:210212,blocksize:225,txs:[{hash:"892d3a0a01ab1a1c3d67e1592e5bd11df687e26098dda08478e6a58e0f6b337a",vin:[{prevout:"COINBASE"}],vout:[{value:5e9,scriptPubKey:n}]},{hash:"522f5e10a101de1b8e2b2289b2f5801daf007221f01a7256a3c961c9d26412fc",vin:[{prevout:"892d3a0a01ab1a1c3d67e1592e5bd11df687e26098dda08478e6a58e0f6b337a",n:0,scriptSig:"044283eb5f9aa7421f646f266fbf5f7a72b7229a7b90a088d1fe45292844557b1d80ed9ac96d5b3ff8286e7794e05c28f70ae671c7fecd634dd278eb0373e6a3ba 3046022100f744154f854952dedd6d673b1f15fcf028159651816e61f1df62955802c8356a022100ec920c0128d84166a802441d174acd665c84d571f7ff908ae1acb95e43a996dc"}],vout:[{value:6e8,scriptPubKey:"1PDLNfJq5GAEn5StESZuBpaBe6B3134vmD"},{value:44e8,scriptPubKey:n}]}]},{hash:"00000369dd0974cb0a472a961247607c196e6353c3ea04746b9bde3272b7de6a",previousHash:"000001a20dacb2ede72eb4b35dea74b83fd4bc0b23849b789fee19c7eac2f1b9",version:1,timestamp:1520948119344,difficulty:22,nonce:6317304,txs:[{hash:"892d3a0a01ab1a1c3d67e1592e5bd11df687e26098dda08478e6a58e0f6b337a",vin:[{prevout:"COINBASE"}],vout:[{value:5e9,scriptPubKey:n}]},{hash:"",vin:[{prevout:"522f5e10a101de1b8e2b2289b2f5801daf007221f01a7256a3c961c9d26412fc",n:1,scriptSig:"304402201d66ed17c21543a2bed0d6f1a85b0929c6c2d5b024848471e5f72e95b9dbe95902202086c3ffa7e273f1cd4d6706f61960c8333a9700b0687dd2b1b7014bdb7c115a"}],vout:[{value:1e9,scriptPubKey:"1PDLNfJq5GAEn5StESZuBpaBe6B3134vmD"},{value:1e9,scriptPubKey:"1Nd85AnFYDtaQAG6vF9FVWXFWksG5HuA3M"}]}]}];t.default=o},function(e,t,r){var n=r(13),o=r(10),a=NaN,u=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,f=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var r=c.test(e);return r||s.test(e)?f(e.slice(2),r?2:8):i.test(e)?a:+e}},function(e,t,r){var n=r(86),o=1/0,a=1.7976931348623157e308;e.exports=function(e){return e?(e=n(e))===o||e===-o?(e<0?-1:1)*a:e==e?e:0:0===e?e:0}},function(e,t,r){var n=r(87);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},function(e,t,r){var n=r(38);e.exports=function(e){return function(t){return n(t,e)}}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,r){var n=r(90),o=r(89),a=r(19),u=r(9);e.exports=function(e){return a(e)?n(u(e)):o(e)}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var n=r(37),o=r(47),a=r(1),u=r(44),i=r(20),c=r(9);e.exports=function(e,t,r){for(var s=-1,f=(t=n(t,e)).length,l=!1;++s<f;){var p=c(t[s]);if(!(l=null!=e&&r(e,p)))break;e=e[p]}return l||++s!=f?l:!!(f=null==e?0:e.length)&&i(f)&&u(p,f)&&(a(e)||o(e))}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,r){var n=r(94),o=r(93);e.exports=function(e,t){return null!=e&&o(e,t,n)}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}},function(e,t,r){var n=r(14),o=r(96),a=r(1),u=r(10),i=1/0,c=n?n.prototype:void 0,s=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return o(t,e)+"";if(u(t))return s?s.call(t):"";var r=t+"";return"0"==r&&1/t==-i?"-0":r}},function(e,t,r){var n=r(97);e.exports=function(e){return null==e?"":n(e)}},function(e,t,r){var n=r(23),o="Expected a function";function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var u=e.apply(this,n);return r.cache=a.set(o,u)||a,u};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},function(e,t,r){var n=r(99),o=500;e.exports=function(e){var t=n(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}},function(e,t,r){var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(100)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,function(e,r,n,a){t.push(n?a.replace(o,"$1"):r||e)}),t});e.exports=a},function(e,t,r){var n=r(38);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},function(e,t,r){var n=r(51),o=r(102),a=r(95),u=r(19),i=r(40),c=r(39),s=r(9),f=1,l=2;e.exports=function(e,t){return u(e)&&i(t)?c(s(e),t):function(r){var u=o(r,e);return void 0===u&&u===t?a(r,e):n(t,u,f|l)}}},function(e,t,r){var n=r(40),o=r(21);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var a=t[r],u=e[a];t[r]=[a,u,n(u)]}return t}},function(e,t,r){var n=r(2)(r(0),"WeakMap");e.exports=n},function(e,t,r){var n=r(2)(r(0),"Promise");e.exports=n},function(e,t,r){var n=r(2)(r(0),"DataView");e.exports=n},function(e,t,r){var n=r(107),o=r(24),a=r(106),u=r(41),i=r(105),c=r(5),s=r(52),f=s(n),l=s(o),p=s(a),d=s(u),v=s(i),h=c;(n&&"[object DataView]"!=h(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||a&&"[object Promise]"!=h(a.resolve())||u&&"[object Set]"!=h(new u)||i&&"[object WeakMap]"!=h(new i))&&(h=function(e){var t=c(e),r="[object Object]"==t?e.constructor:void 0,n=r?s(r):"";if(n)switch(n){case f:return"[object DataView]";case l:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case v:return"[object WeakMap]"}return t}),e.exports=h},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var n=r(109)(Object.keys,Object);e.exports=n},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var n=r(111),o=r(110),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},function(e,t,r){(function(e){var n=r(53),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o&&n.process,i=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=i}).call(this,r(45)(e))},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){var n=r(5),o=r(20),a=r(4),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!u[n(e)]}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var n=r(5),o=r(4),a="[object Arguments]";e.exports=function(e){return o(e)&&n(e)==a}},function(e,t){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},function(e,t,r){var n=r(118),o=r(47),a=r(1),u=r(46),i=r(44),c=r(43),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),f=!r&&o(e),l=!r&&!f&&u(e),p=!r&&!f&&!l&&c(e),d=r||f||l||p,v=d?n(e.length,String):[],h=v.length;for(var b in e)!t&&!s.call(e,b)||d&&("length"==b||l&&("offset"==b||"parent"==b)||p&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||i(b,h))||v.push(b);return v}},function(e,t){e.exports=function(){return[]}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,a=[];++r<n;){var u=e[r];t(u,r,e)&&(a[o++]=u)}return a}},function(e,t,r){var n=r(121),o=r(120),a=Object.prototype.propertyIsEnumerable,u=Object.getOwnPropertySymbols,i=u?function(e){return null==e?[]:(e=Object(e),n(u(e),function(t){return a.call(e,t)}))}:o;e.exports=i},function(e,t){e.exports=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}},function(e,t,r){var n=r(123),o=r(1);e.exports=function(e,t,r){var a=t(e);return o(e)?a:n(a,r(e))}},function(e,t,r){var n=r(124),o=r(122),a=r(21);e.exports=function(e){return n(e,a,o)}},function(e,t,r){var n=r(125),o=1,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,u,i,c){var s=r&o,f=n(e),l=f.length;if(l!=n(t).length&&!s)return!1;for(var p=l;p--;){var d=f[p];if(!(s?d in t:a.call(t,d)))return!1}var v=c.get(e);if(v&&c.get(t))return v==t;var h=!0;c.set(e,t),c.set(t,e);for(var b=s;++p<l;){var y=e[d=f[p]],x=t[d];if(u)var g=s?u(x,y,d,t,e,c):u(y,x,d,e,t,c);if(!(void 0===g?y===x||i(y,x,r,u,c):g)){h=!1;break}b||(b="constructor"==d)}if(h&&!b){var m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(h=!1)}return c.delete(e),c.delete(t),h}},function(e,t){e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},function(e,t,r){var n=r(0).Uint8Array;e.exports=n},function(e,t,r){var n=r(14),o=r(128),a=r(55),u=r(50),i=r(127),c=r(22),s=1,f=2,l="[object Boolean]",p="[object Date]",d="[object Error]",v="[object Map]",h="[object Number]",b="[object RegExp]",y="[object Set]",x="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",_="[object DataView]",k=n?n.prototype:void 0,w=k?k.valueOf:void 0;e.exports=function(e,t,r,n,k,P,S){switch(r){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case m:return!(e.byteLength!=t.byteLength||!P(new o(e),new o(t)));case l:case p:case h:return a(+e,+t);case d:return e.name==t.name&&e.message==t.message;case b:case x:return e==t+"";case v:var j=i;case y:var O=n&s;if(j||(j=c),e.size!=t.size&&!O)return!1;var A=S.get(e);if(A)return A==t;n|=f,S.set(e,t);var E=u(j(e),j(t),n,k,P,S);return S.delete(e),E;case g:if(w)return w.call(e)==w.call(t)}return!1}},function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){var r="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,r),this}},function(e,t,r){var n=r(56),o=r(50),a=r(129),u=r(126),i=r(108),c=r(1),s=r(46),f=r(43),l=1,p="[object Arguments]",d="[object Array]",v="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,b,y,x){var g=c(e),m=c(t),_=g?d:i(e),k=m?d:i(t),w=(_=_==p?v:_)==v,P=(k=k==p?v:k)==v,S=_==k;if(S&&s(e)){if(!s(t))return!1;g=!0,w=!1}if(S&&!w)return x||(x=new n),g||f(e)?o(e,t,r,b,y,x):a(e,t,_,r,b,y,x);if(!(r&l)){var j=w&&h.call(e,"__wrapped__"),O=P&&h.call(t,"__wrapped__");if(j||O){var A=j?e.value():e,E=O?t.value():t;return x||(x=new n),y(A,E,r,b,x)}}return!!S&&(x||(x=new n),u(e,t,r,b,y,x))}},function(e,t,r){var n=r(11);e.exports=function(e,t){var r=n(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}},function(e,t,r){var n=r(11);e.exports=function(e){return n(this,e).has(e)}},function(e,t,r){var n=r(11);e.exports=function(e){return n(this,e).get(e)}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var n=r(11);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,r){var n=r(12),o="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?o:t,this}},function(e,t,r){var n=r(12),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},function(e,t,r){var n=r(12),o="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===o?void 0:r}return a.call(t,e)?t[e]:void 0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var n=r(12);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(e,t,r){var n=r(143),o=r(142),a=r(141),u=r(140),i=r(139);function c(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=u,c.prototype.set=i,e.exports=c},function(e,t,r){var n=r(144),o=r(16),a=r(24);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,r){var n=r(0)["__core-js_shared__"];e.exports=n},function(e,t,r){var n,o=r(147),a=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var n=r(14),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var o=u.call(e);return n&&(t?e[i]=r:delete e[i]),o}},function(e,t,r){var n=r(54),o=r(148),a=r(13),u=r(52),i=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,f=c.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(n(e)?p:i).test(u(e))}},function(e,t,r){var n=r(16),o=r(24),a=r(23),u=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!o||i.length<u-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(i)}return r.set(e,t),this.size=r.size,this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t,r){var n=r(16);e.exports=function(){this.__data__=new n,this.size=0}},function(e,t,r){var n=r(15);e.exports=function(e,t){var r=this.__data__,o=n(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}},function(e,t,r){var n=r(15);e.exports=function(e){return n(this.__data__,e)>-1}},function(e,t,r){var n=r(15);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var n=r(15),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():o.call(t,r,1),--this.size,0))}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var n=r(56),o=r(51),a=1,u=2;e.exports=function(e,t,r,i){var c=r.length,s=c,f=!i;if(null==e)return!s;for(e=Object(e);c--;){var l=r[c];if(f&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++c<s;){var p=(l=r[c])[0],d=e[p],v=l[1];if(f&&l[2]){if(void 0===d&&!(p in e))return!1}else{var h=new n;if(i)var b=i(d,v,p,e,t,h);if(!(void 0===b?o(v,d,a|u,i,h):b))return!1}}return!0}},function(e,t,r){var n=r(162),o=r(104),a=r(39);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},function(e,t,r){var n=r(57),o=r(42),a=r(21);e.exports=function(e){return function(t,r,u){var i=Object(t);if(!o(t)){var c=n(r,3);t=a(t),r=function(e){return c(i[e],e,i)}}var s=e(t,r,u);return s>-1?i[c?t[s]:s]:void 0}}},function(e,t){e.exports=require("babel-register")},function(e,t,r){"use strict";r(59),r(165);var n=r(28),o=r(80),a=g(r(3)),u=g(r(78)),i=g(r(77)),c=(g(r(76)),g(r(75))),s=r(74),f=g(r(25)),l=r(73),p=r(31),d=r(18),v=g(r(62)),h=g(r(61)),b=r(60),y=r(17),x=g(r(7));g(r(30)),r(8);function g(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,a){try{var u=t[o](a),i=u.value}catch(e){return void r(e)}if(!u.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}var _="~~~~~~",k=(0,u.default)();function w(e,t){try{var r=new v.default.Socket;r.setEncoding("utf8"),r.connect(t,e,function(){console.log("> Connected to peer: ",e+":"+t),x.default.dispatch({type:"CONNECT_PEER",ip:e,client:r,port:t});var n=x.default.getState().lastBlock.hash;r.write(["VERSION",1,n].join(_))});var n={client:r,isServer:!1,ip:e};r.on("data",l.handleData.bind(n)),r.on("error",function(e){return console.log(e)})}catch(e){console.log("> Could not connect with peer: ",e.message)}}function P(e){console.log("> New client connection from: ",e.remoteAddress+":"+e.remotePort),e.setEncoding("utf8");var t={client:e,isServer:!0,ip:e.remoteAddress};x.default.dispatch({type:"CONNECT_PEER",client:e,ip:e.remoteAddress,port:e.remotePort}),e.on("data",l.handleData.bind(t)),e.on("error",function(e){return console.log(e)})}k.use(c.default.json()),k.use(c.default.urlencoded({extended:!1})),k.listen(process.env.PORT||3e3,m(regeneratorRuntime.mark(function e(){var t,r,u,c,l,g=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("> App server listening on port ",process.env.PORT),e.next=3,(0,s.connectToDB)();case 3:if(e.sent,"true"!==process.env.SEED){e.next=7;break}return e.next=7,(0,b.seedBlocks)();case 7:return e.next=9,a.default.find({});case 9:return t=e.sent,console.log("> Saved blocks: ",t.length),e.next=13,(0,n.areBlocksValid)(t);case 13:if(e.sent&&t.length){e.next=18;break}return e.next=17,(0,b.seedBlocks)(!0);case 17:t=e.sent;case 18:return x.default.dispatch({type:"SET_INITIAL_BLOCKS",blocks:t}),e.next=21,new Promise(function(e,t){h.default.get_public_ip(function(r,n){r&&t(r),e(n)})});case 21:r=e.sent,u=new i.default("86e36fb6cb404d67a108",{auth:{params:{ip_addr:r,port:8334}},cluster:"us2",authEndpoint:"https://pusher-presence-auth.herokuapp.com/pusher/auth",encrypted:!0}),(c=u.subscribe("presence-node-coin")).bind("pusher:subscription_succeeded",function(){var e=m(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("> pusher:subscription_succeeded: ",t),n=[],c.members.each(function(e){var t=e.id;t!==r&&n.push({ip:t,port:8334,connected:!1,client:null,synced:!1})}),x.default.dispatch({type:"SET_PEERS",allPeers:n.slice(0,25)}),o=0;case 5:if(!(o<Math.min(25,n.length))){e.next=11;break}return e.next=8,w(n[o].ip,8334);case 8:o++,e.next=5;break;case 11:case"end":return e.stop()}},e,g)}));return function(t){return e.apply(this,arguments)}}()),c.bind("pusher:member_removed",function(e){console.log("> pusher:member_removed: ",e);var t=[];x.default.getState().allPeers.forEach(function(r){r.ip!==e.id&&t.push(r)}),x.default.dispatch({type:"SET_PEERS",allPeers:t})}),c.bind("pusher:member_added",function(){var e=m(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("> pusher:member_added: ",t),(r=x.default.getState().allPeers).push({ip:t.id,connected:!1,client:null,synced:!1}),x.default.dispatch({type:"SET_PEERS",allPeers:r}),setTimeout(m(regeneratorRuntime.mark(function e(){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x.default.getState().allPeers,(o=(0,f.default)(r,function(e){return e.ip===t.id}))&&o.connected){e.next=5;break}return e.next=5,w(t.id,8334);case 5:case"end":return e.stop()}},e,n)})),1e4);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),c.bind("transaction:new",function(){var e=m(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("> transaction:new: ",t.tx.hash),e.next=3,(0,n.isTxValid)(t.tx);case 3:e.sent?x.default.dispatch({type:"NEW_TX",tx:t.tx}):console.log("> Invalid tx: ",t.tx.hash);case 5:case"end":return e.stop()}},e,g)}));return function(t){return e.apply(this,arguments)}}()),c.bind("block:new",function(){var e=m(regeneratorRuntime.mark(function e(t){var r,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("> block:new: ",t),e.next=3,(0,p.isNodeSynced)();case 3:return e.sent,r=x.default.getState().lastBlock,e.next=7,(0,n.isBlockValid)(t.block,r);case 7:if(o=e.sent,console.log("> New block valid: ",o),!o){e.next=17;break}return x.default.dispatch({type:"STOP_MINING"}),u=new a.default(t.block),e.next=14,u.save();case 14:return x.default.dispatch({type:"ADD_BLOCK",block:u}),e.next=17,(0,y.startMining)();case 17:case"end":return e.stop()}},e,g)}));return function(t){return e.apply(this,arguments)}}()),(l=v.default.createServer()).on("connection",P),l.listen(8334,"0.0.0.0",function(){console.log("> TCP/IP server listening on ",l.address())}),k.post("/send",o.sendMoney),k.post("/wallets/new",function(){var e=m(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.makeWallet)();case 2:n=e.sent,r.status(200).send({wallet:n});case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()),k.get("/wallets/:address",function(){var e=m(regeneratorRuntime.mark(function e(t,r){var n,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.getWalletData)(t.params.address);case 2:n=e.sent,a=n.utxo,u=n.balance,r.status(200).send({wallet:{balance:u},utxo:a});case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}());case 35:case"end":return e.stop()}},e,this)})))}]);